import{C as O,aC as b,a2 as p,o as s,c as m,w as l,b as P,d as t,H as f,S as j,R as h,e as I,B as E,O as R,aD as G,aE as H,aF as L,aG as T,I as X}from"./main.b563b6c5.js";import{P as Y}from"./Breadcrumbs.351052f9.js";import{a as g}from"./rpc.bec88a25.js";import{_ as z,F as A,I as J}from"./Input.29bfae56.js";import{_ as K}from"./index.9f27fde3.js";const M=d=>(L("data-v-103ac34f"),d=d(),T(),d),Q=M(()=>X("span",{style:{padding:"0 10px 10px"}},"x",-1)),W={key:1},Z={__name:"BasicInfo",setup(d){const e=b({ip:"",device_id:"",collection_frequency:"",img_name_rules:[],resolution_ratio:""}),i=p(1920),_=p(1080);p(),p([]),(async()=>{const a=await g.get("/api/system/config/name/rules");console.log("img_name",a),console.log("xxxxxxxxxx",Object.keys(a)),k.value[3].options=Object.keys(a).map(n=>({label:n,value:n}))})();const w=(a,n)=>{let u=[];u=a,e.img_name_rules=u,console.log(e.img_name_rules)},q=a=>{},v=async()=>{const a=await g.get("/api/system/config/detail");e.device_id=a.device_id,e.collection_frequency=a.collection_frequency,e.img_name_rules=a.img_name_rules.split(","),e.resolution_ratio=a.resolution_ratio,e.ip=a.ip;const n=a.resolution_ratio.indexOf("x"),u=a.resolution_ratio.length;i.value=a.resolution_ratio.substring(0,n),_.value=a.resolution_ratio.substring(n+1,u)};v();const B=async()=>{window.open("/api/system/config/images")},k=p([{label:"\u8BBE\u5907\u7F16\u53F7",key:"device_id",type:"input"},{label:"\u91C7\u96C6\u65F6\u95F4\u70B9\uFF08\u9891\u7387\uFF09",key:"collection_frequency",type:"input"},{label:"\u56FE\u7247\u4FDD\u5B58\u547D\u540D\u89C4\u5219 \u793A\u4F8B",key:"example",type:"span",defaultValue:"{{today}}/{{deviceid}}-{{datetime}}"},{label:"\u56FE\u7247\u4FDD\u5B58\u547D\u540D\u89C4\u5219",key:"img_name_rules",type:"input",options:[{label:"xx",value:"xx"},{label:"yy",value:"yy"}]},{label:"\u8F93\u51FA\u5206\u8FA8\u7387",key:"resolution_ratio",type:"input"},{label:"IP",key:"ip",type:"input"}]),y=b({device_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BBE\u5907\u7F16\u53F7"}],collection_frequency:[{required:!0,message:"\u8BF7\u8F93\u5165\u91C7\u96C6\u65F6\u95F4\u70B9"}],img_name_rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u7247\u4FDD\u5B58\u547D\u540D\u89C4\u5219"}],resolution_ratio:[{required:!0,message:"\u8BF7\u8F93\u5165\u8F93\u51FA\u5206\u8FA8\u7387"}]}),S=async()=>{const a=await g.post("/api/system/config/update",{device_id:e.device_id,collection_frequency:e.collection_frequency,img_name_rules:e.img_name_rules.join(""),resolution_ratio:e.resolution_ratio});v(),console.log("\u{1F680} ~ clickImage ~ res:",a)},C=async a=>{console.log(123),console.log("\u{1F680} ~ onFinish ~ formState:",e),S()},F=()=>{e.resolution_ratio=`${i.value}x${_.value}`,i.value||(e.resolution_ratio="")},V=()=>{e.resolution_ratio=`${i.value}x${_.value}`,_.value||(e.resolution_ratio="")};return(a,n)=>{const u=K,D=G,c=z,N=H,U=J,x=E,$=A;return s(),m(P(Y),null,{default:l(()=>[t($,{model:e,name:"basic","label-col":{span:4},"wrapper-col":{span:16},autocomplete:"off",onFinish:C},{default:l(()=>[(s(!0),f(h,null,j(k.value,o=>(s(),f(h,{key:o},[o.key=="resolution_ratio"?(s(),m(c,{key:0,label:o.label,name:o.key,rules:y[o.key],"wrapper-col":{span:6}},{default:l(()=>[t(u,{value:i.value,"onUpdate:value":n[0]||(n[0]=r=>i.value=r),onChange:F},null,8,["value"]),Q,t(D,null,{default:l(()=>[t(u,{value:_.value,"onUpdate:value":n[1]||(n[1]=r=>_.value=r),onChange:V},null,8,["value"])]),_:1})]),_:2},1032,["label","name","rules"])):o.key=="img_name_rules"?(s(),m(c,{key:1,label:o.label,name:o.key,rules:y[o.key],"wrapper-col":{span:16}},{default:l(()=>[t(N,{mode:"tags",value:e.img_name_rules,"onUpdate:value":n[2]||(n[2]=r=>e.img_name_rules=r),style:{width:"100%"},placeholder:"Please select",options:o.options,onChange:w,onSelect:q},null,8,["value","options"])]),_:2},1032,["label","name","rules"])):(s(),m(c,{key:2,label:o.label,name:o.key,rules:y[o.key]},{default:l(()=>[o.defaultValue?(s(),f("span",W,R(o.defaultValue),1)):(s(),m(U,{key:0,value:e[o.key],"onUpdate:value":r=>e[o.key]=r},null,8,["value","onUpdate:value"]))]),_:2},1032,["label","name","rules"]))],64))),128)),t(c,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(x,{type:"default",onClick:B},{default:l(()=>[I("\u67E5\u770B\u56FE\u50CF")]),_:1})]),_:1}),t(c,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(x,{type:"primary","html-type":"submit"},{default:l(()=>[I("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}};var se=O(Z,[["__scopeId","data-v-103ac34f"]]);export{se as default};
